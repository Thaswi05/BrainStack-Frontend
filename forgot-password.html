<<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Forgot Password</title>

<style>
body{
    font-family: Arial;
    background:#f4f6f9;
}
.box{
    width:360px;
    margin:100px auto;
    background:white;
    padding:25px;
    border-radius:8px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
}
input,button{
    width:100%;
    padding:10px;
    margin:8px 0;
}
button{
    background:#1e293b;
    color:white;
    border:none;
    cursor:pointer;
}
button:hover{background:#334155;}
.msg{font-size:14px;margin-top:10px;}
.error{color:red;}
.success{color:green;}
</style>
</head>

<body>

<div class="box">
<h2>Forgot Password</h2>

<!-- STEP 1 -->
<input type="email" id="email" placeholder="Enter registered email">
<button onclick="sendOTP()">Send OTP</button>

<!-- STEP 2 -->
<div id="otpBox" style="display:none;">
    <input type="text" id="otpInput" placeholder="Enter OTP">
    <button onclick="verifyOTP()">Verify OTP</button>
</div>

<!-- STEP 3 -->
<div id="resetBox" style="display:none;">
    <input type="password" id="newPass" placeholder="New Password">
    <input type="password" id="confirmPass" placeholder="Confirm Password">
    <button onclick="resetPassword()">Reset Password</button>
</div>

<p id="msg" class="msg"></p>

<p style="text-align:center">
<a href="login.html">Back to Login</a>
</p>
</div>

<!-- EMAILJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
emailjs.init("YOUR_PUBLIC_KEY"); // ðŸ”´ replace

let generatedOTP = "";

/* SEND OTP */
function sendOTP(){
    const email = document.getElementById("email").value;
    if(email === ""){
        showMsg("Enter email","error");
        return;
    }

    generatedOTP = Math.floor(100000 + Math.random()*900000);

    emailjs.send(
        "YOUR_SERVICE_ID",     // ðŸ”´ replace
        "YOUR_TEMPLATE_ID",    // ðŸ”´ replace
        {
            to_email: email,
            otp: generatedOTP
        }
    ).then(()=>{
        showMsg("OTP sent to your email","success");
        document.getElementById("otpBox").style.display="block";
    }).catch(err=>{
        console.log(err);
        showMsg("Email sending failed","error");
    });
}

/* VERIFY OTP */
function verifyOTP(){
    const enteredOTP = document.getElementById("otpInput").value;
    if(enteredOTP == generatedOTP){
        showMsg("OTP verified","success");
        document.getElementById("resetBox").style.display="block";
    }else{
        showMsg("Wrong OTP","error");
    }
}

/* RESET PASSWORD */
function resetPassword(){
    const p1 = document.getElementById("newPass").value;
    const p2 = document.getElementById("confirmPass").value;

    if(p1 === "" || p2 === ""){
        showMsg("Fill all fields","error");
        return;
    }
    if(p1 !== p2){
        showMsg("Passwords do not match","error");
        return;
    }

    localStorage.setItem("password", p1);
    alert("Password reset successful!");
    window.location.href = "login.html";
}

/* MESSAGE */
function showMsg(text,type){
    const msg = document.getElementById("msg");
    msg.innerText = text;
    msg.className = "msg " + type;
}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Forgot Password</title>

<style>
body{
    font-family: Arial;
    background:#f4f6f9;
}
.box{
    width:360px;
    margin:100px auto;
    background:white;
    padding:25px;
    border-radius:8px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
}
input,button{
    width:100%;
    padding:10px;
    margin:8px 0;
}
button{
    background:#1e293b;
    color:white;
    border:none;
    cursor:pointer;
}
button:hover{background:#334155;}
.msg{font-size:14px;margin-top:10px;}
.error{color:red;}
.success{color:green;}
</style>
</head>

<body>

<div class="box">
<h2>Forgot Password</h2>

<!-- STEP 1 -->
<input type="email" id="email" placeholder="Enter registered email">
<button onclick="sendOTP()">Send OTP</button>

<!-- STEP 2 -->
<div id="otpBox" style="display:none;">
    <input type="text" id="otpInput" placeholder="Enter OTP">
    <button onclick="verifyOTP()">Verify OTP</button>
</div>

<!-- STEP 3 -->
<div id="resetBox" style="display:none;">
    <input type="password" id="newPass" placeholder="New Password">
    <input type="password" id="confirmPass" placeholder="Confirm Password">
    <button onclick="resetPassword()">Reset Password</button>
</div>

<p id="msg" class="msg"></p>

<p style="text-align:center">
<a href="login.html">Back to Login</a>
</p>
</div>

<!-- EMAILJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
emailjs.init("-g4VhZc53a_HXmqrV"); // ðŸ”´ replace

let generatedOTP = "";

/* SEND OTP */
function sendOTP(){
    const email = document.getElementById("email").value;
    if(email === ""){
        showMsg("Enter email","error");
        return;
    }

    generatedOTP = Math.floor(100000 + Math.random()*900000);

    emailjs.send(
        "thaswikj",     // ðŸ”´ replace
        "template_wwoud2i",    // ðŸ”´ replace
        {
            to_email: email,
            otp: generatedOTP
        }
    ).then(()=>{
        showMsg("OTP sent to your email","success");
        document.getElementById("otpBox").style.display="block";
    }).catch(err=>{
        console.log(err);
        showMsg("Email sending failed","error");
    });
}

/* VERIFY OTP */
function verifyOTP(){
    const enteredOTP = document.getElementById("otpInput").value;
    if(enteredOTP == generatedOTP){
        showMsg("OTP verified","success");
        document.getElementById("resetBox").style.display="block";
    }else{
        showMsg("Wrong OTP","error");
    }
}

/* RESET PASSWORD */
function resetPassword(){
    const p1 = document.getElementById("newPass").value;
    const p2 = document.getElementById("confirmPass").value;

    if(p1 === "" || p2 === ""){
        showMsg("Fill all fields","error");
        return;
    }
    if(p1 !== p2){
        showMsg("Passwords do not match","error");
        return;
    }

    localStorage.setItem("password", p1);
    alert("Password reset successful!");
    window.location.href = "login.html";
}

/* MESSAGE */
function showMsg(text,type){
    const msg = document.getElementById("msg");
    msg.innerText = text;
    msg.className = "msg " + type;
}
</script>

</body>
</html>